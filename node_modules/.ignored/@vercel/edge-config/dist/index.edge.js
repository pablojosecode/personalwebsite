import{a as n,d as c,e as h,g as u,h as s}from"./chunk-FUIF3GTR.js";function w(t){if(!t)throw new Error("@vercel/edge-config: No connection string provided");let E=u(t);if(!E)throw new Error("@vercel/edge-config: Invalid connection string provided");let d=`https://edge-config.vercel.com/${E.id}`,f="1",g={Authorization:`Bearer ${E.token}`};return{async get(r){return c(r),s(`${d}/item/${r}?version=${f}`,{headers:new Headers(g),cache:"no-store"}).then(e=>{if(e.status===401)throw new Error(n.UNAUTHORIZED);if(e.status===404){if(e.headers.has("x-edge-config-digest"))return;throw new Error(n.EDGE_CONFIG_NOT_FOUND)}if(e.cachedResponseBody!==void 0)return e.cachedResponseBody;if(e.ok)return e.json();throw new Error(n.UNEXPECTED)},()=>{throw new Error(n.NETWORK)})},async has(r){return c(r),s(`${d}/item/${r}?version=${f}`,{method:"HEAD",headers:new Headers(g),cache:"no-store"}).then(e=>{if(e.status===401)throw new Error(n.UNAUTHORIZED);if(e.status===404){if(e.headers.has("x-edge-config-digest"))return!1;throw new Error(n.EDGE_CONFIG_NOT_FOUND)}if(e.ok)return!0;throw new Error(n.UNEXPECTED)},()=>{throw new Error(n.NETWORK)})},async getAll(r){Array.isArray(r)&&h(r);let e=Array.isArray(r)?new URLSearchParams(r.map(o=>["key",o])).toString():null;return e===""?Promise.resolve({}):s(`${d}/items?version=${f}${e===null?"":`&${e}`}`,{headers:new Headers(g),cache:"no-store"}).then(async o=>{if(o.status===401)throw new Error(n.UNAUTHORIZED);if(o.status===404)throw new Error(n.EDGE_CONFIG_NOT_FOUND);if(o.cachedResponseBody!==void 0)return o.cachedResponseBody;if(o.ok)return o.json();throw new Error(n.UNEXPECTED)},()=>{throw new Error(n.NETWORK)})},async digest(){return s(`${d}/digest?version=1`,{headers:new Headers(g),cache:"no-store"}).then(r=>{if(r.cachedResponseBody!==void 0)return r.cachedResponseBody;if(r.ok)return r.json();throw new Error(n.UNEXPECTED)},()=>{throw new Error(n.NETWORK)})}}}var i;function a(){i||(i=w(process.env.EDGE_CONFIG))}var p=(...t)=>(a(),i.get(...t)),m=(...t)=>(a(),i.getAll(...t)),T=(...t)=>(a(),i.has(...t)),N=(...t)=>(a(),i.digest(...t));export{w as createClient,N as digest,p as get,m as getAll,T as has,u as parseConnectionString};
